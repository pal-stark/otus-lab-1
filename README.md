# otus-lab-1
# OTUS Laboratory work #1
Домашнее задание
Настройка zabbix, создание LLD, оповещение на основе триггеров
Цель: Установить и настроить zabbix, настроить автоматическую отправку аллертов в телеграмм канал.

Домашнее задание представляет из себя следующее.

Необходимо сформировать скрипт генерирующий метрики формата:

otus_important_metrics[metric1]
otus_important_metrics[metric2]
otus_important_metrics[metric3]

С рандомным значение от 0 до 100

Создать правила LLD для обнаружения этих метрик и автоматического добавления триггеров. Триггер должен срабатывать тогда когда значение больше или равно 95.

Реализовать автоматическую отправку уведомлений в телеграмм канал.

В качестве результаты выполнения дз предоставить скрипт генерации
метрик, скриншоты графиков полученных метрик, ссылку на телеграмм канал с уже отпраленными уведомлениями.

ДЗ выполняется в следующей среде.
Сервер Zabbix 5.0 поднят на физической машине, с установленной OS CentOs 7.
Для мониторнига использовался существующий сервер, так же на физической машине,
с установленной OS CentOs 7.
Для выполнения работы был установлен стандартный Zabbix agent.


1. Написан скрипт otus_metrics.php для обеспечения работы механизма LLD и генерации данных метрик. (должна быть установленна версия php 5.6 и выше)
Помещаем файл в /etc/zabbix/scripts/ Устанавливаем права на выполнение 0755 для файла, так чтобы Zabbix agent мог его запускать.

2. Пишем файл настроек otus_metrics.conf и добавляем в /etc/zabbix/zabbix_agent.d/
Владельцем назначаем пользователя, от имени которого выполняется Zabbix agent.
Ставим права на чтение для пользователя, от имени которого выполняется Zabbix agent.

3. Перезапускаем zabbix agent.

4. Настраиваем темплейт для LLD Configuration->Templates. В темплейте создаём правила обнаружения, прототип сущностей, прототип графиков сущностей и прототип триггеров.
Готовый темплейт выгружен в проект под именем zbx_export_templates.xml

5. Создаём хост для наблюдения Configuration->Hosts. Указываем IP сервера, на котором разместили zabbix agent и скрипт генерации данных. Связываем добавленный хост с созданным темплейтом.

6. Создаём канал telegramm и настраиваем отправку соощений при срабатывании триггеров.
